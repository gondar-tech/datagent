name: "Smart Routing Workflow"
version: "1.0"
description: "Workflow that routes user requests to Greeting, DataProcessing, or ExtraTopic agents using an LLM Planner."

config:
  service_name: "Avaloka AI"
  service_info: "We help you clean and process your data with ease."
  llm_config:
    provider: "groq"
    model: "llama-3.3-70b-versatile"

nodes:
  start_node:
    id: "start_node"
    type: "agent"
    agent_id: "planner"
    inputs:
      user_request: "$user_request"

  router_node:
    id: "router_node"
    type: "router"
    condition: "$next_agent"

  greeting_node:
    id: "greeting_node"
    type: "agent"
    agent_id: "greeting"
    inputs:
      user_message: "$user_request"

  data_processing_node:
    id: "data_processing_node"
    type: "agent"
    agent_id: "data_processor"
    inputs:
      user_request: "$user_request"

  extra_topic_node:
    id: "extra_topic_node"
    type: "agent"
    agent_id: "extra_topic"
    config:
      service_info: "We handle big data so you don't have to!"
    inputs:
      user_query: "$user_request"

  end_node:
    id: "end_node"
    type: "end"

edges:
  - from: start_node
    to: router_node

  - from: router_node
    to: greeting_node
    condition: "greeting"

  - from: router_node
    to: data_processing_node
    condition: "data_processor"

  - from: router_node
    to: extra_topic_node
    condition: "extra_topic"

  - from: router_node
    to: extra_topic_node
    default: true

  - from: greeting_node
    to: end_node

  - from: data_processing_node
    to: end_node

  - from: extra_topic_node
    to: end_node

start_node: "start_node"
